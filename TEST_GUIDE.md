# 네트워크 슈퍼마리오 테스트 가이드

## 컴파일

프로젝트 루트 디렉토리에서 다음 명령을 실행하여 전체 프로젝트를 컴파일합니다.

```powershell
javac -encoding UTF-8 -d . -sourcepath src src/manager/GameEngine.java
```

## 테스트 시나리오

### 1. 싱글플레이어 모드 테스트

기본 게임 기능이 정상 작동하는지 확인합니다.

```powershell
java -cp ".;src" manager.GameEngine
```

**확인 사항:**
- 시작 화면이 정상적으로 표시되는가?
- "게임 시작" 메뉴가 선택 가능한가?
- 맵 선택 화면이 표시되는가?
- 게임 플레이가 정상적으로 작동하는가?

### 2. 서버 모드 테스트

서버를 시작하고 클라이언트 연결을 대기합니다.

**터미널 1 (서버):**
```powershell
java -cp ".;src" network.server.GameServer
```

**확인 사항:**
- 서버가 포트 25565에서 시작되는가?
- "Server started on port 25565" 메시지가 표시되는가?
- 클라이언트 연결을 대기하는가?

### 3. 클라이언트 연결 테스트

별도의 터미널에서 클라이언트를 시작하여 서버에 연결합니다.

**터미널 2 (클라이언트):**
```powershell
java -cp ".;src" network.client.GameClient localhost 25565
```

**확인 사항:**
- 클라이언트가 서버에 연결되는가?
- 서버 터미널에 "Client connected" 메시지가 표시되는가?
- 클라이언트 터미널에 "Connected to server" 메시지가 표시되는가?

### 4. 멀티플레이어 게임 테스트 (통합)

게임 엔진을 통해 전체 멀티플레이어 기능을 테스트합니다.

**터미널 1 (서버 플레이어):**
```powershell
java -cp ".;src" manager.GameEngine
```
1. 시작 화면에서 "서버 시작" 선택
2. 대기 화면에서 클라이언트 연결 대기
3. 2명 이상 접속 시 "게임 시작" 버튼 활성화
4. 게임 시작

**터미널 2 (클라이언트 플레이어 1):**
```powershell
java -cp ".;src" manager.GameEngine
```
1. 시작 화면에서 "서버 접속" 선택
2. 서버 주소 입력: localhost
3. 연결 대기

**터미널 3 (클라이언트 플레이어 2, 선택사항):**
```powershell
java -cp ".;src" manager.GameEngine
```
1. 시작 화면에서 "서버 접속" 선택
2. 서버 주소 입력: localhost
3. 연결 대기

**확인 사항:**
- 모든 클라이언트가 서버에 연결되는가?
- 대기 화면에 접속한 플레이어 목록이 표시되는가?
- 게임 시작 시 모든 플레이어가 동시에 게임 화면으로 전환되는가?
- 각 플레이어의 입력이 서버로 전송되는가?
- 모든 클라이언트에서 다른 플레이어의 위치가 동기화되는가?
- 각 클라이언트의 카메라가 자신의 플레이어를 추적하는가?

### 5. 게임 플레이 기능 테스트

**확인 사항:**
- 플레이어 이동 (좌/우 방향키)
- 플레이어 점프 (스페이스바)
- 적과의 충돌 감지
- 아이템 획득
- 점수 및 생명 동기화
- 게임 종료 조건 (클리어/게임오버)

### 6. 네트워크 안정성 테스트

**확인 사항:**
- 클라이언트 연결 해제 시 서버가 정상 작동하는가?
- 서버 종료 시 클라이언트가 적절히 처리하는가?
- 네트워크 지연 시 게임이 안정적으로 작동하는가?

## 알려진 이슈

### 경로 인코딩 문제
- PowerShell에서 한글 경로 처리 시 인코딩 문제가 발생할 수 있습니다.
- 해결 방법: 프로젝트 루트 디렉토리에서 직접 명령을 실행하거나, 영문 경로로 이동 후 실행합니다.

### 컴파일 경고
- 일부 코드 품질 관련 경고가 표시될 수 있으나, 기능에는 영향이 없습니다.

## 디버깅 팁

### 로그 확인
- 서버와 클라이언트 모두 콘솔에 상세한 로그를 출력합니다.
- 연결 문제 발생 시 양쪽 로그를 확인하여 원인을 파악합니다.

### 포트 충돌
- 포트 25565가 이미 사용 중인 경우, 다른 포트를 사용합니다.
- `GameServer.java`의 `DEFAULT_PORT` 상수를 수정합니다.

### 방화벽 설정
- Windows 방화벽이 Java 애플리케이션의 네트워크 접근을 차단할 수 있습니다.
- 필요 시 방화벽 예외를 추가합니다.

## 성능 측정

### 네트워크 지연 측정
- 클라이언트와 서버 간의 메시지 전송 시간을 측정합니다.
- 로그에서 "Sending message" 및 "Received message" 타임스탬프를 비교합니다.

### 프레임 레이트 측정
- 게임 실행 중 FPS를 확인합니다.
- 목표: 60 FPS (클라이언트 렌더링)

### 동기화 주기 측정
- 서버의 게임 상태 브로드캐스트 주기를 확인합니다.
- 목표: 20-30 Hz (초당 20-30회)

## 문제 보고

테스트 중 발견된 문제는 다음 정보와 함께 보고해 주세요:
1. 발생 시나리오
2. 예상 동작 vs 실제 동작
3. 콘솔 로그 (서버 및 클라이언트)
4. 재현 단계

---

**작성일**: 2024-12-14
**버전**: 1.0
**상태**: Phase 4 - 통합 및 테스트

